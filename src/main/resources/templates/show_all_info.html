<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <title>Test</title>
    <script type="text/javascript" src="../jquery/jquery-3.5.1.min.js"></script>
    <script th:inline="javascript">
        function deleteInfo() {
               const name =  document.getElementById("name");
               $.ajax({
                   type:'post',
                   url: "/admin/deleteEpidemicInfo",
                   contentType:"application/json;charset=UTF-8",
                   data:{"name":name},
                   success : function(){
                       alert("发送成功");
                   },
                   error : function () {
                        alert("发送失败");
                   }

               })
        }
        function search() {
            const field = $("name").serialize();
            const obj = {};
            obj[field.name]=field.value;
            //const name = $("#search").val();
            $.ajax({
                type:"post",
                url:"/findByName",
                asyc:true,
                contentType:"application/json; charset=UTF-8",
                //data:{"name":name},
                data: JSON.stringify(obj),
                cache:false,
                success : function(){
                    alert("发送成功");
                },
                error: function() {
                    alert("发送失败");
                }
            })
        }
    </script>
</head>
<body>
<div>
    <h5>查询结果如下</h5>
    <div id="box">
        <input id="search" type="search" name="search" placeholder="请输入关键字">
        <button formType="submit" class="btn" onclick="search()">搜索</button>

    </div>
    <table border="solid" cellspacing="0">
        <tr>
            <th width="100">姓名</th>
            <th width="100">性别</th>
            <th width="100">年龄</th>
            <th width="100">身份证号码</th>
            <th>身份证类型</th>
            <th>家庭地址</th>
            <th>社区是否存在病例</th>
            <th>电话号码</th>
        </tr>
        <tr th:each="epidemicInfo : ${epidemicInfos}">
            <td th:id="name" th:name="name" th:text="${epidemicInfo['name']}"></td>
            <td th:text="${epidemicInfo['sex']}"></td>
            <td th:text="${epidemicInfo['age']}"></td>
            <td th:text="${epidemicInfo['id_card']}"></td>
            <td th:text="${epidemicInfo['id_type']}"></td>
            <td th:text="${epidemicInfo['id_type']}"></td>
            <td th:text="${epidemicInfo['inNative']}"></td>
            <td th:text="${epidemicInfo['phone']}"></td>
            <td><input type="submit" value="删除" onclick="deleteInfo()"></td>
        </tr>
    </table>
</div>
</body>
</html>